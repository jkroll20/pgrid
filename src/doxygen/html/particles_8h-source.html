<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>pgrid: code/pgrid/src/particles.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>code/pgrid/src/particles.h</h1><a href="particles_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef PARTICLES_H</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define PARTICLES_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include "<a class="code" href="pgrid_8h.html">pgrid.h</a>"</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include "<a class="code" href="texture_8h.html">texture.h</a>"</span>
<a name="l00007"></a>00007 
<a name="l00008"></a><a class="code" href="structt__particle.html">00008</a> <span class="keyword">struct </span><a class="code" href="structt__particle.html">t_particle</a>
<a name="l00009"></a>00009 {
<a name="l00010"></a><a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">00010</a>     <a class="code" href="structvec.html">vec</a> <a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>;
<a name="l00011"></a><a class="code" href="structt__particle.html#408e6e752a87abffef426037a05c300f">00011</a>     <span class="keywordtype">float</span> <a class="code" href="structt__particle.html#408e6e752a87abffef426037a05c300f">height</a>;       <span class="comment">// von phys. berechnet</span>
<a name="l00012"></a><a class="code" href="structt__particle.html#0667d52fbd64102c99874bdd3cc1211a">00012</a>     <a class="code" href="structvec.html">vec</a> <a class="code" href="structt__particle.html#0667d52fbd64102c99874bdd3cc1211a">speed</a>;
<a name="l00013"></a>00013 };
<a name="l00014"></a>00014 
<a name="l00015"></a><a class="code" href="structvert3.html">00015</a> <span class="keyword">struct </span><a class="code" href="structvert3.html">vert3</a>
<a name="l00016"></a>00016 {
<a name="l00017"></a><a class="code" href="structvert3.html#6af84e0a03bdb037aa0ba4a3a501ae94">00017</a>     <span class="keywordtype">float</span> <a class="code" href="structvert3.html#3997d1c779f4470be09105f9fe13a98b">x</a>, <a class="code" href="structvert3.html#f9ab8bc03f16d29bc3a82ec8bfb55ad4">y</a>, <a class="code" href="structvert3.html#6af84e0a03bdb037aa0ba4a3a501ae94">z</a>;
<a name="l00018"></a>00018 } __attribute__((<a class="code" href="main_8h.html#69e5075fcaaacd2dff014eb9ac39c55b">packed</a>));
<a name="l00019"></a>00019 
<a name="l00020"></a><a class="code" href="classt__particles.html">00020</a> <span class="keyword">class </span><a class="code" href="classt__particles.html">t_particles</a>: <span class="keyword">public</span> <a class="code" href="classdyninputhandler.html">dyninputhandler</a>
<a name="l00021"></a>00021 {
<a name="l00022"></a>00022     <span class="keyword">private</span>:
<a name="l00023"></a>00023         <span class="keywordtype">void</span> <a class="code" href="classt__particles.html#59a0af59042ba14807db06744594dbac">renderquads</a>();
<a name="l00024"></a>00024         <span class="keywordtype">void</span> <a class="code" href="classt__particles.html#312536a52a4b73f31b50597491e744c5">renderarrays</a>();
<a name="l00025"></a>00025         <span class="keywordtype">void</span> <a class="code" href="classt__particles.html#f2501463a6bbaf9bc7134ffe7268d80a">updatearrays</a>();
<a name="l00026"></a>00026         <span class="keywordtype">void</span> <a class="code" href="classt__particles.html#db81e661365ec34b376f43e559fd9ada">complexphysics</a>(<span class="keywordtype">float</span> time);
<a name="l00027"></a>00027         <span class="keywordtype">bool</span> <a class="code" href="classt__particles.html#9a30add11b5f31b7747a29c05981b064">iscurrent</a>();
<a name="l00028"></a>00028         
<a name="l00029"></a><a class="code" href="classt__particles.html#cfc06196d0801037820c68c4c599750a">00029</a>         <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classt__particles.html#cfc06196d0801037820c68c4c599750a">rendermode</a>; <span class="comment">// quads/quad arrays</span>
<a name="l00030"></a>00030         
<a name="l00031"></a><a class="code" href="structt__particles_1_1t__quadarray.html">00031</a>         <span class="keyword">struct </span><a class="code" href="structt__particles_1_1t__quadarray.html">t_quadarray</a>
<a name="l00032"></a>00032         {
<a name="l00033"></a><a class="code" href="structt__particles_1_1t__quadarray.html#3b041e6e93c02f791da30668d5550fed">00033</a>             <a class="code" href="structvec.html">vec</a> *<a class="code" href="structt__particles_1_1t__quadarray.html#3b041e6e93c02f791da30668d5550fed">texcoords</a>;
<a name="l00034"></a><a class="code" href="structt__particles_1_1t__quadarray.html#e866049d409df5b5ebe0fd86859f706a">00034</a>             <a class="code" href="structvert3.html">vert3</a> *<a class="code" href="structt__particles_1_1t__quadarray.html#e866049d409df5b5ebe0fd86859f706a">verts</a>;
<a name="l00035"></a><a class="code" href="structt__particles_1_1t__quadarray.html#682bd0f72b254b2a6a4fddc3ef790a97">00035</a>             <span class="keywordtype">int</span> <a class="code" href="structt__particles_1_1t__quadarray.html#682bd0f72b254b2a6a4fddc3ef790a97">nquads</a>;
<a name="l00036"></a><a class="code" href="structt__particles_1_1t__quadarray.html#7e0ad996694ec8b89fe4719495370eb6">00036</a>             <span class="keywordtype">int</span> <a class="code" href="structt__particles_1_1t__quadarray.html#7e0ad996694ec8b89fe4719495370eb6">arraysize</a>;      <span class="comment">// in quads</span>
<a name="l00037"></a>00037             
<a name="l00038"></a><a class="code" href="structt__particles_1_1t__quadarray.html#adec3f6da9fbd789a55d1d0d941c3b39">00038</a>             <a class="code" href="structt__particles_1_1t__quadarray.html#adec3f6da9fbd789a55d1d0d941c3b39">t_quadarray</a>() { memset(<span class="keyword">this</span>, 0, <span class="keyword">sizeof</span>(*<span class="keyword">this</span>)); }
<a name="l00039"></a><a class="code" href="structt__particles_1_1t__quadarray.html#530666b53a73552ca1da2edcbc022b38">00039</a>             <a class="code" href="structt__particles_1_1t__quadarray.html#530666b53a73552ca1da2edcbc022b38">~t_quadarray</a>() { <span class="keywordflow">if</span>(<a class="code" href="structt__particles_1_1t__quadarray.html#3b041e6e93c02f791da30668d5550fed">texcoords</a>) free(<a class="code" href="structt__particles_1_1t__quadarray.html#3b041e6e93c02f791da30668d5550fed">texcoords</a>); <span class="keywordflow">if</span>(<a class="code" href="structt__particles_1_1t__quadarray.html#e866049d409df5b5ebe0fd86859f706a">verts</a>) free(<a class="code" href="structt__particles_1_1t__quadarray.html#e866049d409df5b5ebe0fd86859f706a">verts</a>); }
<a name="l00040"></a>00040             <span class="keywordtype">void</span> <a class="code" href="structt__particles_1_1t__quadarray.html#dd042f6a3cafc3644b6c8502074dd424">reset</a>(<span class="keywordtype">int</span> maxsize);
<a name="l00041"></a>00041             <span class="keywordtype">void</span> <a class="code" href="structt__particles_1_1t__quadarray.html#7a04f78622f631f49f167b1901841f9a">alloc</a>(<span class="keywordtype">int</span> maxsize);
<a name="l00042"></a>00042             <span class="keywordtype">void</span> <a class="code" href="structt__particles_1_1t__quadarray.html#94ff8ff486ec045078427bfd79b7cd41">addquad</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> size);
<a name="l00043"></a>00043             <span class="keywordtype">void</span> <a class="code" href="structt__particles_1_1t__quadarray.html#119c7d4bae6a765edc6aab8afa978802">updatequad</a>(<span class="keywordtype">int</span> idx, <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> size);
<a name="l00044"></a>00044             <span class="keywordtype">void</span> <a class="code" href="structt__particles_1_1t__quadarray.html#dc6397beae9a28232ecbec26bf3fc7f6">draw</a>();
<a name="l00045"></a>00045         };
<a name="l00046"></a>00046         
<a name="l00047"></a><a class="code" href="classt__particles.html#aa6285a1bf138e9089451853b7985bd7">00047</a>         <a class="code" href="structt__particles_1_1t__quadarray.html">t_quadarray</a> <a class="code" href="classt__particles.html#aa6285a1bf138e9089451853b7985bd7">quadarray</a>;
<a name="l00048"></a>00048         
<a name="l00049"></a><a class="code" href="classt__particles.html#4cd38b9bb901498b2f458438a3b04de3">00049</a>         <span class="keywordtype">float</span> <a class="code" href="classt__particles.html#4cd38b9bb901498b2f458438a3b04de3">nextcomplexphysics</a>;
<a name="l00050"></a>00050         
<a name="l00051"></a>00051     <span class="keyword">public</span>:
<a name="l00052"></a><a class="code" href="classt__particles.html#774f1308d5cefe7e5e3fc9802e807bf5">00052</a>         <span class="keyword">typedef</span> <a class="code" href="structvector.html">vector&lt;t_particle&gt;</a> <a class="code" href="structvector.html">t_particlecontainer</a>;
<a name="l00053"></a>00053         
<a name="l00054"></a><a class="code" href="classt__particles.html#44174a87c82394fffabed41ec54df713">00054</a>         <a class="code" href="classt__grid.html">t_grid</a> *<a class="code" href="classt__particles.html#44174a87c82394fffabed41ec54df713">grid</a>;
<a name="l00055"></a><a class="code" href="classt__particles.html#730b73ffa9126a464e155873228e96c8">00055</a>         <a class="code" href="classt__editor.html">t_editor</a> *<a class="code" href="classt__particles.html#730b73ffa9126a464e155873228e96c8">editor</a>;
<a name="l00056"></a><a class="code" href="classt__particles.html#259b0549ba82270b7b37d123c713140f">00056</a>         <a class="code" href="structvector.html">t_particlecontainer</a> <a class="code" href="classt__particles.html#259b0549ba82270b7b37d123c713140f">particles</a>;
<a name="l00057"></a><a class="code" href="classt__particles.html#c38b3a304b65dd2030842daaabd59cfa">00057</a>         <a class="code" href="structt__texture.html">t_texture</a> *<a class="code" href="classt__particles.html#c38b3a304b65dd2030842daaabd59cfa">texture</a>;
<a name="l00058"></a>00058         
<a name="l00059"></a>00059         <a class="code" href="classt__particles.html#26f4cfb7d80f6623241299a158d17aca">t_particles</a>(<a class="code" href="classt__grid.html">t_grid</a> *g);
<a name="l00060"></a>00060         <a class="code" href="classt__particles.html#f74b23d53a37d382f92e37daf29ad5c1">~t_particles</a>();
<a name="l00061"></a>00061     
<a name="l00062"></a>00062         <span class="keywordtype">void</span> <a class="code" href="classt__particles.html#9e132bb2a77381f520cab449ccb222f6">keyboard_event</a>(SDL_KeyboardEvent &amp;evt);
<a name="l00063"></a>00063         
<a name="l00064"></a>00064         <span class="keywordtype">void</span> <a class="code" href="classt__particles.html#10fb6094275ed3c0ccb9ae4134881fbc">phys_tick</a>(<span class="keywordtype">float</span> time);
<a name="l00065"></a>00065         
<a name="l00066"></a>00066         <span class="keywordtype">void</span> <a class="code" href="classt__particles.html#7eafce340e9d6a352128ccbbbfc67080">render</a>(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> w, <span class="keywordtype">float</span> h);
<a name="l00067"></a>00067         
<a name="l00068"></a>00068         <span class="keywordtype">void</span> <span class="keyword">add</span>(<a class="code" href="structt__particle.html">t_particle</a> &amp;p);
<a name="l00069"></a>00069         
<a name="l00070"></a><a class="code" href="classt__particles.html#dba38915837bd36295071fe3485ad4d9">00070</a>         <span class="keywordtype">void</span> <a class="code" href="classt__particles.html#dba38915837bd36295071fe3485ad4d9">clamp_particle</a>(<a class="code" href="structt__particle.html">t_particle</a> &amp;p)
<a name="l00071"></a>00071         {
<a name="l00072"></a>00072             <span class="keywordflow">if</span>(<a class="code" href="classt__particles.html#730b73ffa9126a464e155873228e96c8">editor</a>-&gt;<a class="code" href="classt__editor.html#311d337b45d625c14febb2719fc6d951">dowrap</a>())
<a name="l00073"></a>00073             {
<a name="l00074"></a>00074                 <span class="keywordtype">float</span> w= <a class="code" href="classt__particles.html#44174a87c82394fffabed41ec54df713">grid</a>-&gt;<a class="code" href="classt__grid.html#1d81bb71d29b631bb96cd61e483a5b60">width</a>*<a class="code" href="main_8h.html#8b9c6d7a9852c1b379fb9e7dca7a1dca">GRIDGRANULARITY</a>, h= <a class="code" href="classt__particles.html#44174a87c82394fffabed41ec54df713">grid</a>-&gt;<a class="code" href="classt__grid.html#075c2ab07844136a0546ecf13d11d40c">height</a>*<a class="code" href="main_8h.html#8b9c6d7a9852c1b379fb9e7dca7a1dca">GRIDGRANULARITY</a>;
<a name="l00075"></a>00075                 <span class="keywordflow">while</span>(p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#d082bcfec22f0d1e9a8d3d3a9ed8aaa1">x</a>&lt;0) p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#d082bcfec22f0d1e9a8d3d3a9ed8aaa1">x</a>+= w;
<a name="l00076"></a>00076                 <span class="keywordflow">while</span>(p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#fe34f9686215c8d0a353e2f8e50c57e5">y</a>&lt;0) p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#fe34f9686215c8d0a353e2f8e50c57e5">y</a>+= h;
<a name="l00077"></a>00077                 <span class="keywordflow">while</span>(p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#d082bcfec22f0d1e9a8d3d3a9ed8aaa1">x</a>&gt;w) p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#d082bcfec22f0d1e9a8d3d3a9ed8aaa1">x</a>-= w;
<a name="l00078"></a>00078                 <span class="keywordflow">while</span>(p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#fe34f9686215c8d0a353e2f8e50c57e5">y</a>&gt;h) p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#fe34f9686215c8d0a353e2f8e50c57e5">y</a>-= h;
<a name="l00079"></a>00079             }
<a name="l00080"></a>00080             <span class="keywordflow">else</span>
<a name="l00081"></a>00081             {
<a name="l00082"></a>00082                 <span class="keywordflow">if</span>(p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#d082bcfec22f0d1e9a8d3d3a9ed8aaa1">x</a>&lt;0)
<a name="l00083"></a>00083                     p.<a class="code" href="structt__particle.html#0667d52fbd64102c99874bdd3cc1211a">speed</a>.<a class="code" href="structvec.html#d082bcfec22f0d1e9a8d3d3a9ed8aaa1">x</a>= -p.<a class="code" href="structt__particle.html#0667d52fbd64102c99874bdd3cc1211a">speed</a>.<a class="code" href="structvec.html#d082bcfec22f0d1e9a8d3d3a9ed8aaa1">x</a>,
<a name="l00084"></a>00084                     p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#d082bcfec22f0d1e9a8d3d3a9ed8aaa1">x</a>= 0;
<a name="l00085"></a>00085                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#d082bcfec22f0d1e9a8d3d3a9ed8aaa1">x</a>&gt;<a class="code" href="classt__particles.html#44174a87c82394fffabed41ec54df713">grid</a>-&gt;<a class="code" href="classt__grid.html#1d81bb71d29b631bb96cd61e483a5b60">width</a>*<a class="code" href="main_8h.html#8b9c6d7a9852c1b379fb9e7dca7a1dca">GRIDGRANULARITY</a>)
<a name="l00086"></a>00086                     p.<a class="code" href="structt__particle.html#0667d52fbd64102c99874bdd3cc1211a">speed</a>.<a class="code" href="structvec.html#d082bcfec22f0d1e9a8d3d3a9ed8aaa1">x</a>= -p.<a class="code" href="structt__particle.html#0667d52fbd64102c99874bdd3cc1211a">speed</a>.<a class="code" href="structvec.html#d082bcfec22f0d1e9a8d3d3a9ed8aaa1">x</a>,
<a name="l00087"></a>00087                     p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#d082bcfec22f0d1e9a8d3d3a9ed8aaa1">x</a>= <a class="code" href="classt__particles.html#44174a87c82394fffabed41ec54df713">grid</a>-&gt;<a class="code" href="classt__grid.html#1d81bb71d29b631bb96cd61e483a5b60">width</a>*<a class="code" href="main_8h.html#8b9c6d7a9852c1b379fb9e7dca7a1dca">GRIDGRANULARITY</a>;
<a name="l00088"></a>00088                 
<a name="l00089"></a>00089                 <span class="keywordflow">if</span>(p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#fe34f9686215c8d0a353e2f8e50c57e5">y</a>&lt;0)
<a name="l00090"></a>00090                     p.<a class="code" href="structt__particle.html#0667d52fbd64102c99874bdd3cc1211a">speed</a>.<a class="code" href="structvec.html#fe34f9686215c8d0a353e2f8e50c57e5">y</a>= -p.<a class="code" href="structt__particle.html#0667d52fbd64102c99874bdd3cc1211a">speed</a>.<a class="code" href="structvec.html#fe34f9686215c8d0a353e2f8e50c57e5">y</a>,
<a name="l00091"></a>00091                     p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#fe34f9686215c8d0a353e2f8e50c57e5">y</a>= 0;
<a name="l00092"></a>00092                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#fe34f9686215c8d0a353e2f8e50c57e5">y</a>&gt;<a class="code" href="classt__particles.html#44174a87c82394fffabed41ec54df713">grid</a>-&gt;<a class="code" href="classt__grid.html#075c2ab07844136a0546ecf13d11d40c">height</a>*<a class="code" href="main_8h.html#8b9c6d7a9852c1b379fb9e7dca7a1dca">GRIDGRANULARITY</a>)
<a name="l00093"></a>00093                     p.<a class="code" href="structt__particle.html#0667d52fbd64102c99874bdd3cc1211a">speed</a>.<a class="code" href="structvec.html#fe34f9686215c8d0a353e2f8e50c57e5">y</a>= -p.<a class="code" href="structt__particle.html#0667d52fbd64102c99874bdd3cc1211a">speed</a>.<a class="code" href="structvec.html#fe34f9686215c8d0a353e2f8e50c57e5">y</a>,
<a name="l00094"></a>00094                     p.<a class="code" href="structt__particle.html#33da1a5fb40e25b3f3f95ecf3dbca339">pos</a>.<a class="code" href="structvec.html#fe34f9686215c8d0a353e2f8e50c57e5">y</a>= <a class="code" href="classt__particles.html#44174a87c82394fffabed41ec54df713">grid</a>-&gt;<a class="code" href="classt__grid.html#075c2ab07844136a0546ecf13d11d40c">height</a>*<a class="code" href="main_8h.html#8b9c6d7a9852c1b379fb9e7dca7a1dca">GRIDGRANULARITY</a>;
<a name="l00095"></a>00095             }
<a name="l00096"></a>00096         }
<a name="l00097"></a>00097 };
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 
<a name="l00104"></a>00104 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Sun Mar 30 21:28:45 2008 for pgrid by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
